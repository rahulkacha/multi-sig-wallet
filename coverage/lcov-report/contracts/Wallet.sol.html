<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts\Wallet.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> Wallet.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/26</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/28</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/11</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/37</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: GPL-3.0
pragma solidity ^0.8.2;
&nbsp;
import "@openzeppelin/contracts/access/Ownable.sol";
&nbsp;
/// @title Multi-Signature Wallet
/// @author Rahul Kacha
/// @notice This contract implements a multi-signature wallet, where transactions must be confirmed by multiple owners before being executed.
/// @dev The contract inherits from Ownable to have ownership control. It uses a confirmation-based mechanism to execute transactions.
&nbsp;
contract Wallet is Ownable {
    /// @dev Struct representing a transaction in the wallet.
    /// @param to The address to which the funds will be sent.
    /// @param value The amount of funds to be sent.
    /// @param executed Boolean indicating whether the transaction has been executed.
    /// @param numConfirmations Number of confirmations received for the transaction.
    struct Transaction {
        address to;
        uint256 value;
        bool executed;
        uint256 numConfirmations;
    }
&nbsp;
    address[] private owners; // List of wallet owners.
    mapping(address =&gt; bool) private isOwner; // Mapping to check if an address is an owner.
    uint256 private numConfirmationsRequired; // Number of confirmations required to execute a transaction.
    Transaction[] private transactions; // List of all transactions.
    mapping(uint256 =&gt; mapping(address =&gt; bool)) public isConfirmed; // Mapping to check if a transaction has been confirmed by an owner.
&nbsp;
    // Events
    /// @notice Emitted when a new transaction is generated.
    /// @param owner The address of the owner who generated the transaction.
    /// @param txIndex The index of the generated transaction.
    /// @param to The recipient address of the transaction.
    /// @param value The amount of the transaction.
    event GenerateTransaction(
        address indexed owner,
        uint256 indexed txIndex,
        address indexed to,
        uint256 value
    );
&nbsp;
    /// @notice Emitted when a transaction is confirmed.
    /// @param owner The address of the owner who confirmed the transaction.
    /// @param txIndex The index of the confirmed transaction.
    event ConfirmTransaction(address indexed owner, uint256 indexed txIndex);
&nbsp;
    /// @notice Emitted when a transaction is executed.
    /// @param owner The address of the owner who executed the transaction.
    /// @param txIndex The index of the executed transaction.
    event ExecuteTransaction(address indexed owner, uint256 indexed txIndex);
&nbsp;
    // Modifiers
    /// @dev Ensures that the transaction exists.
    /// @param _txIndex The index of the transaction.
<span class="fstat-no" title="function not covered" >    modifier txExists(uint256 _txIndex) {</span>
<span class="cstat-no" title="statement not covered" >        require(_txIndex &lt; transactions.length, "Transaction does not exist")</span>;
        _;
    }
&nbsp;
    /// @dev Ensures that the transaction has not been executed yet.
    /// @param _txIndex The index of the transaction.
<span class="fstat-no" title="function not covered" >    modifier notExecuted(uint256 _txIndex) {</span>
<span class="cstat-no" title="statement not covered" >        require(</span>
            !transactions[_txIndex].executed,
            "Transaction already executed"
        );
        _;
    }
&nbsp;
    /// @dev Ensures that the transaction has not been confirmed by the sender.
    /// @param _txIndex The index of the transaction.
<span class="fstat-no" title="function not covered" >    modifier notConfirmed(uint256 _txIndex) {</span>
<span class="cstat-no" title="statement not covered" >        require(</span>
            !isConfirmed[_txIndex][msg.sender],
            "Transaction already confirmed"
        );
        _;
    }
&nbsp;
    /// @dev Ensures that the sender is an authorized owner.
    /// @param _address The address to check.
<span class="fstat-no" title="function not covered" >    modifier isAuthorized(address _address) {</span>
<span class="cstat-no" title="statement not covered" >        bool found = false;</span>
<span class="cstat-no" title="statement not covered" >        for (uint256 i = 0; i &lt; owners.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >            if (owners[i] == _address) {</span>
                found = true;
                break;
            }
        }
<span class="cstat-no" title="statement not covered" >        require(found, "Unauthorized operation.")</span>;
        _;
    }
&nbsp;
    /// @notice Initializes the wallet with a list of owners.
    /// @param _owners The list of addresses to be set as owners.
<span class="fstat-no" title="function not covered" >    constructor(address[] memory _owners) Ownable(msg.sender) {</span>
<span class="cstat-no" title="statement not covered" >        require(_owners.length &gt; 0, "At least one owner required")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        for (uint256 i = 0; i &lt; _owners.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >            address owner = _owners[i];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            require(owner != address(0), "Invalid owner address")</span>;
<span class="cstat-no" title="statement not covered" >            require(!isOwner[owner], "Duplicate owner")</span>;
&nbsp;
            isOwner[owner] = true;
<span class="cstat-no" title="statement not covered" >            owners.push(owner)</span>;
        }
&nbsp;
        numConfirmationsRequired = _owners.length;
    }
&nbsp;
    /// @notice Returns the list of owners.
    /// @return An array of owner addresses.
<span class="fstat-no" title="function not covered" >    function getOwners() public view returns (address[] memory) {</span>
<span class="cstat-no" title="statement not covered" >        return owners;</span>
    }
&nbsp;
    /// @notice Generates a new transaction and adds it to the list of transactions.
    /// @param _to The recipient address of the transaction.
    /// @param _value The amount of funds to be sent.
<span class="fstat-no" title="function not covered" >    function generateTransaction(address _to, uint256 _value) public {</span>
<span class="cstat-no" title="statement not covered" >        uint256 txIndex = transactions.length;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        transactions.push(</span>
            Transaction({
                to: _to,
                value: _value,
                executed: false,
                numConfirmations: 0
            })
        );
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit GenerateTransaction(msg.sender, txIndex, _to, _value);</span>
    }
&nbsp;
    /// @notice Confirms a transaction, increasing its number of confirmations.
    /// @param _txIndex The index of the transaction to confirm.
<span class="fstat-no" title="function not covered" >    function confirmTransaction(uint256 _txIndex)</span>
        public
        isAuthorized(msg.sender)
        txExists(_txIndex)
        notExecuted(_txIndex)
        notConfirmed(_txIndex)
    {
<span class="cstat-no" title="statement not covered" >        Transaction storage transaction = transactions[_txIndex];</span>
        transaction.numConfirmations += 1;
        isConfirmed[_txIndex][msg.sender] = true;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit ConfirmTransaction(msg.sender, _txIndex);</span>
<span class="cstat-no" title="statement not covered" >        if (transaction.numConfirmations &gt;= numConfirmationsRequired) {</span>
<span class="cstat-no" title="statement not covered" >            executeTransaction(_txIndex)</span>;
        }
    }
&nbsp;
    /// @dev Executes a transaction if the required number of confirmations is met.
    /// @param _txIndex The index of the transaction to execute.
<span class="fstat-no" title="function not covered" >    function executeTransaction(uint256 _txIndex)</span>
        private
        notExecuted(_txIndex)
    {
<span class="cstat-no" title="statement not covered" >        Transaction storage transaction = transactions[_txIndex];</span>
&nbsp;
        transaction.executed = true;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit ExecuteTransaction(msg.sender, _txIndex);</span>
    }
&nbsp;
    /// @notice Returns the details of a transaction.
    /// @param _txIndex The index of the transaction to retrieve.
    /// @return to The recipient address of the transaction.
    /// @return value The amount of funds to be sent.
    /// @return executed Whether the transaction has been executed.
    /// @return numConfirmations The number of confirmations received.
<span class="fstat-no" title="function not covered" >    function getTransaction(uint256 _txIndex)</span>
        public
        view
        returns (
            address to,
            uint256 value,
            bool executed,
            uint256 numConfirmations
        )
    {
<span class="cstat-no" title="statement not covered" >        Transaction storage transaction = transactions[_txIndex];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        return (</span>
            transaction.to,
            transaction.value,
            transaction.executed,
            transaction.numConfirmations
        );
    }
&nbsp;
    /// @notice Returns the list of all transactions.
    /// @return length The total number of transactions.
    /// @return The array of transactions.
<span class="fstat-no" title="function not covered" >    function getAllTransactions()</span>
        public
        view
        returns (uint256 length, Transaction[] memory)
    {
<span class="cstat-no" title="statement not covered" >        return (transactions.length, transactions);</span>
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Jul 25 2024 23:19:09 GMT-0400 (Eastern Daylight Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
